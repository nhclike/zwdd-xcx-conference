"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");exports.__esModule=!0,exports.default=void 0;var _invoker=_interopRequireDefault(require("./invoker")),TASK_COMPLETE=1;function downloadFile(e){return _invoker.default.invoke("downloadFile",e)}_invoker.default.registerAPI("downloadFile",{mini:function(e,i){var t=i.resolve,o=i.reject,n=i.context;n&&n.call("downloadFile",e,(function(e){e.error?o(e):t(e)}))},pc:function(e,i){window.dingtalk.platform.invokeAPI(i.msgId,"biz.util.downloadFile",e),_invoker.default.registerContinuesEvent(i.msgId,(function(t,o){"im.fileTask.addNewTask"===t&&(_invoker.default.removeContinuesEvent(i.msgId),_invoker.default.registerContinuesEvent(o.taskId,(function(i,t){if("im.fileTask.updateTask"===i){var o=t.doneSize,n=t.fileName,r=t.filePath,l=t.fileSize,a=t.speed;e.onProgress({doneSize:o,fileName:n,filePath:r,fileSize:l,speed:a}),t.status===TASK_COMPLETE&&_invoker.default.removeContinuesEvent(t.taskId)}})))}))}});var _default=downloadFile;exports.default=_default,module.exports=exports.default,module.exports.default=exports.default;