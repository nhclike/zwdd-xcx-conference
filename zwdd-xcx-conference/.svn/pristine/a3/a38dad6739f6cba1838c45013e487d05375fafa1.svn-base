import invoker from"./invoker";var TASK_COMPLETE=1;function downloadFile(e){return invoker.invoke("downloadFile",e)}invoker.registerAPI("downloadFile",{mini:function(e,i){var n=i.resolve,o=i.reject,t=i.context;t&&t.call("downloadFile",e,(function(e){e.error?o(e):n(e)}))},pc:function(e,i){window.dingtalk.platform.invokeAPI(i.msgId,"biz.util.downloadFile",e),invoker.registerContinuesEvent(i.msgId,(function(n,o){"im.fileTask.addNewTask"===n&&(invoker.removeContinuesEvent(i.msgId),invoker.registerContinuesEvent(o.taskId,(function(i,n){if("im.fileTask.updateTask"===i){var o=n.doneSize,t=n.fileName,r=n.filePath,d=n.fileSize,l=n.speed;e.onProgress({doneSize:o,fileName:t,filePath:r,fileSize:d,speed:l}),n.status===TASK_COMPLETE&&invoker.removeContinuesEvent(n.taskId)}})))}))}});export default downloadFile;